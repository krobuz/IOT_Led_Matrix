<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <script defer src="/public/dashboard.js"></script>
    <!-- Dashboard JavaScript -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" href="/style.css" />
</head>

<body>
    <div class="row m-2">
        <h1>Welcome, <%= username %>!</h1>
        <p id="ws-status">Connecting to WebSocket...</p>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-1"></div>
            <div class="card p-4 shadow-sm col-lg-5">
                <h2 class="text-center mb-4">Control Panel</h2>
                <div class="row mb-3">
                    <div class="col">
                        <h5>Nhiệt độ: <span id="temperature">25°C</span></h5>
                    </div>
                    <div class="col">
                        <h5>Độ ẩm: <span id="humidity">60%</span></h5>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col">
                        <input type="text" class="form-control" placeholder="Nhập chữ muốn hiển thị" id="messageBox" />
                    </div>
                </div>
                <div class="row mb-3 d-flex justify-content-between">
                    <div class="col">
                        <label for="scrollDirection">Direction:</label>
                        <select id="scrollDirection" name="scrollDirection">
                            <option value="left">Left</option>
                            <option value="right">Right</option>
                            <option value="up">Up</option>
                            <option value="down">Down</option>
                        </select>
                    </div>
                    <div class="col">
                        <label for="scrollSpeed">Speed:</label>
                        <input type="number" id="scrollSpeed" name="scrollSpeed" min="1" max="1000" value="100" />
                    </div>
                    <div class="col-auto">
                        <button class="btn btn-primary" id="sendButton">Xác nhận</button>
                    </div>
                </div>

                <div class="row mb-3 d-flex justify-content-between">
                    <div class="col">
                        <h6>Chế độ: <span id="current-mode">Tự động</span></h6>
                    </div>
                    <div class="col">
                        <button class="btn btn-secondary" id="change-mode-btn">
                            Chuyển chế độ
                        </button>
                    </div>
                    <div class="col">
                        <input type="number" class="form-control" placeholder="Nhiệt độ giới hạn"
                            id="limited-temperature" />
                    </div>
                    <div class="col-auto">
                        <button class="btn btn-success">Xác nhận</button>
                    </div>
                </div>
            </div>
            <div class="card p-4 col-lg-5 mx-4">
                <h2 class="text-center">Activity Logs</h2>
                <table border="1">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>User</th>
                            <th>Action</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody id="activityLogs">
                        <!-- Logs will be dynamically filled here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script type="module" src="/dashboard.js"></script>
</body>
<!-- <script>
    fetch('/api/activity-logs')
        .then(response => response.json())
        .then(logs => {
            const logsContainer = document.getElementById('activityLogs');

            logsContainer.innerHTML = '';

            logs.forEach(log => {
                const row = document.createElement('tr');

                const timestampCell = document.createElement('td');
                timestampCell.textContent = new Date(log.timestamp).toLocaleString();
                row.appendChild(timestampCell);

                const userCell = document.createElement('td');
                userCell.textContent = `User ${log.user_id}`;
                row.appendChild(userCell);

                const actionCell = document.createElement('td');
                actionCell.textContent = log.action;
                row.appendChild(actionCell);

                const detailsCell = document.createElement('td');
                detailsCell.textContent = log.text_content + ', ' + log.scroll_speed + ', ' + log.scroll_direction;
                row.appendChild(detailsCell);

                logsContainer.appendChild(row);
            });
        })
        .catch(error => {
            console.error('Error fetching activity logs:', error);
        });
</script> -->

</html>